# Django Car Registry API

–≠—Ç–æ Django –≤–µ—Ä—Å–∏—è —Å–∏—Å—Ç–µ–º—ã —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ –∞–≤—Ç–æ–º–æ–±–∏–ª–µ–π, –ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å FastAPI. API –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤–∞—Ö, –≤–ª–∞–¥–µ–ª—å—Ü–∞—Ö, –≤–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏—Ö —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è—Ö, —Å—Ç—Ä–∞—Ö–æ–≤—ã—Ö –ø–æ–ª–∏—Å–∞—Ö –∏ –∞–≤–∞—Ä–∏—è—Ö.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- **–ë–µ–∑ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏**: –í—Å–µ API endpoints –¥–æ—Å—Ç—É–ø–Ω—ã –±–µ–∑ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
- **SQLite**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç SQLite –∫–∞–∫ –æ—Å–Ω–æ–≤–Ω—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–æ—Å—Ç–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ)
- **Django REST Framework**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π REST API
- **Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è**: –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API
- **Docker**: –ì–æ—Ç–æ–≤–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –¥–ª—è —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—è

## API Endpoints

### 1. Health Check
```
GET /api/health/
```
–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ API –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö.

**–û—Ç–≤–µ—Ç:**
```json
{
  "ok": true,
  "database": "connected"
}
```

### 2. –°–ø–∏—Å–æ–∫ –Ω–æ–º–µ—Ä–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤
```
GET /api/list/
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Å–ø–∏—Å–æ–∫ –≤—Å–µ—Ö –∞–∫—Ç–∏–≤–Ω—ã—Ö –Ω–æ–º–µ—Ä–Ω—ã—Ö –∑–Ω–∞–∫–æ–≤.

**–û—Ç–≤–µ—Ç:**
```json
{
  "plates": ["123ABC02", "456DEF03", ...],
  "count": 1000
}
```

### 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ –Ω–æ–º–µ—Ä–Ω–æ–º—É –∑–Ω–∞–∫—É
```
GET /api/check/{plate}/
```
–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –ø–æ–ª–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ–º —Å—Ä–µ–¥—Å—Ç–≤–µ –ø–æ –Ω–æ–º–µ—Ä–Ω–æ–º—É –∑–Ω–∞–∫—É.

**–ü—Ä–∏–º–µ—Ä –∑–∞–ø—Ä–æ—Å–∞:**
```
GET /api/check/123ABC02/
```

**–û—Ç–≤–µ—Ç:**
```json
{
  "plate": "123ABC02",
  "vehicle": {
    "vehicle_id": 1,
    "vin": "WVWZZZ1JZXW000001",
    "make": "Volkswagen",
    "model": "Golf",
    "year": 2019,
    "color": "white"
  },
  "owner": {
    "owner_id": 1,
    "full_name": "–ò–≤–∞–Ω–æ–≤ –ò–≤–∞–Ω –ò–≤–∞–Ω–æ–≤–∏—á",
    "iin": "900101123456",
    "dob": "1990-01-01",
    "phone": "+77010000000"
  },
  "driver_license": {
    "license_id": 1,
    "number": "KZ1234567",
    "categories": "B,BE",
    "issued_at": "2020-02-01",
    "expires_at": "2030-02-01",
    "status": "valid"
  },
  "insurance": [
    {
      "policy_number": "OSG-2025-0001",
      "type": "OSAGO",
      "insurer": "Jusan Insurance",
      "valid_from": "2025-01-01",
      "valid_to": "2025-12-31",
      "status": "active"
    }
  ],
  "accidents": [
    {
      "date": "2024-05-10",
      "severity": "minor",
      "location": "–ê–ª–º–∞—Ç—ã",
      "description": "–°—Ç–æ–ª–∫–Ω–æ–≤–µ–Ω–∏–µ –Ω–∞ –ø–∞—Ä–∫–æ–≤–∫–µ",
      "fault_party": "other"
    }
  ]
}
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

1. **–ö–ª–æ–Ω–∏—Ä—É–π—Ç–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π:**
```bash
cd django_car_registry
```

2. **–£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏:**
```bash
pip install -r requirements.txt
```

3. **–í—ã–ø–æ–ª–Ω–∏—Ç–µ –º–∏–≥—Ä–∞—Ü–∏–∏:**
```bash
python manage.py makemigrations
python manage.py migrate
```

4. **–ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ç–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ:**
```bash
python load_data.py
```

5. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å–µ—Ä–≤–µ—Ä:**
```bash
python manage.py runserver
```

API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000/api/`

## üìö Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ –¥–æ—Å—Ç—É–ø–Ω–∞ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è API:

- **Swagger UI**: `http://localhost:8000/api/docs/`
- **ReDoc**: `http://localhost:8000/api/redoc/`
- **OpenAPI Schema**: `http://localhost:8000/api/schema/`

Swagger UI –ø–æ–∑–≤–æ–ª—è–µ—Ç:
- –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞—Ç—å –≤—Å–µ –¥–æ—Å—Ç—É–ø–Ω—ã–µ endpoints
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å API –ø—Ä—è–º–æ –≤ –±—Ä–∞—É–∑–µ—Ä–µ
- –í–∏–¥–µ—Ç—å –ø—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
- –ò–∑—É—á–∞—Ç—å —Å—Ç—Ä—É–∫—Ç—É—Ä—É –¥–∞–Ω–Ω—ã—Ö

### Docker

1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å Docker Compose:**
```bash
docker-compose up --build
```

2. **API –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:** `http://localhost:8000/api/`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
django_car_registry/
‚îú‚îÄ‚îÄ car_registry/          # –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ Django
‚îÇ   ‚îú‚îÄ‚îÄ settings.py        # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–µ–∫—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ urls.py           # –ì–ª–∞–≤–Ω—ã–µ URL –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ ...
‚îú‚îÄ‚îÄ api/                  # Django –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å API
‚îÇ   ‚îú‚îÄ‚îÄ models.py         # –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ views.py          # API views
‚îÇ   ‚îú‚îÄ‚îÄ serializers.py    # DRF —Å–µ—Ä–∏–∞–ª–∏–∑–∞—Ç–æ—Ä—ã
‚îÇ   ‚îú‚îÄ‚îÄ urls.py           # API URL –º–∞—Ä—à—Ä—É—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ admin.py          # –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å
‚îú‚îÄ‚îÄ db/init/              # SQL —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ –ë–î
‚îÇ   ‚îú‚îÄ‚îÄ 01_schema.sql     # –°—Ö–µ–º–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
‚îÇ   ‚îú‚îÄ‚îÄ 02_seed.sql       # –ë–∞–∑–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îî‚îÄ‚îÄ 03_mock.sql       # –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ
‚îú‚îÄ‚îÄ requirements.txt      # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ docker-compose.yml    # Docker –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Dockerfile           # Docker –æ–±—Ä–∞–∑
‚îî‚îÄ‚îÄ README.md            # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö

- **Owner**: –í–ª–∞–¥–µ–ª—å—Ü—ã —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã—Ö —Å—Ä–µ–¥—Å—Ç–≤
- **Vehicle**: –¢—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ —Å—Ä–µ–¥—Å—Ç–≤–∞
- **Plate**: –ù–æ–º–µ—Ä–Ω—ã–µ –∑–Ω–∞–∫–∏
- **DriverLicense**: –í–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–µ —É–¥–æ—Å—Ç–æ–≤–µ—Ä–µ–Ω–∏—è
- **Insurer**: –°—Ç—Ä–∞—Ö–æ–≤—ã–µ –∫–æ–º–ø–∞–Ω–∏–∏
- **InsurancePolicy**: –°—Ç—Ä–∞—Ö–æ–≤—ã–µ –ø–æ–ª–∏—Å—ã
- **Accident**: –î–æ—Ä–æ–∂–Ω–æ-—Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω—ã–µ –ø—Ä–æ–∏—Å—à–µ—Å—Ç–≤–∏—è

## –ê–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å

Django –∞–¥–º–∏–Ω –ø–∞–Ω–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É: `http://localhost:8000/admin/`

–î–ª—è —Å–æ–∑–¥–∞–Ω–∏—è —Å—É–ø–µ—Ä–ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è:
```bash
python manage.py createsuperuser
```

## –û—Ç–ª–∏—á–∏—è –æ—Ç FastAPI –≤–µ—Ä—Å–∏–∏

1. **–§—Ä–µ–π–º–≤–æ—Ä–∫**: Django + Django REST Framework –≤–º–µ—Å—Ç–æ FastAPI
2. **ORM**: Django ORM –≤–º–µ—Å—Ç–æ raw SQL –∑–∞–ø—Ä–æ—Å–æ–≤
3. **–°—Ç—Ä—É–∫—Ç—É—Ä–∞**: –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Django –ø—Ä–æ–µ–∫—Ç–∞
4. **–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: –ü–æ–ª–Ω–æ—Å—Ç—å—é —É–±—Ä–∞–Ω–∞ (AllowAny –¥–ª—è –≤—Å–µ—Ö endpoints)
5. **CORS**: –ù–∞—Å—Ç—Ä–æ–µ–Ω –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º

## –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

- **Python**: 3.11+
- **Django**: 4.2.7
- **Django REST Framework**: 3.14.0
- **drf-spectacular**: 0.26.5 (Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è)
- **SQLite**: 3 (–≤—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è –≤ Python)
- **django-cors-headers**: 4.3.1
